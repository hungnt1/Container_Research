## Pod Overview

- Pod là thành phần nhỏ và đơn giản nhất trong k8s mà có thể khởi tạo và deploy. Pods tương ứng với một tiến trình chạy trong cluster
- Pod đóng gói các ứng dụng được xây dựng trong container, storage, network IP và các tùy chọn IP. Pod được biểu diễn là một unit trong deployment: là một instance của một ứng dụng trong k8s, bao gồm nhiều hoặc 1 container cùng chia sẻ tài nguyên

- Có 2 cách để sử dụng pod trong K8s
  - Chạy một container trong Pod: trường hợp một container trong một pod được sử dụng nhiều nhất, trong trường hợp này hiều đơn giản như một container đang được đóng gói, k8s quản lý pod thay vì quản lý container
  - Chạy nhiều container trong Pod: một pod có thể đóng gói nhiều container, điều này có nghĩa các container cần được liên kết chặt vẽ và chia sẻ tài nguyên. Những container này trong cùng một Pod có thể kết hợp mới các container để thành một đơn vị có cùng share file, các sidecard trong Pod sẽ cùng update các file này.

## Cách mà K8S quản lý nhiều container trong Pod

- Pod có thể chạy nhiều process ( container). Container trong một Pod sẽ được scheduler trên cùng một Pod. Container trên cùng một Pod sẽ cùng chia tài nguyê, network env và các gói depmentdencies.
- Trường hợp một Pod chạu nhiều container đước sử dụng trong môi trường nâng cao.
- Tài nguyên được chia sẻ giữa các container trong Pod:
  - Mỗi POD sẽ được gắn một địa chỉ IP. Tất cả container trong cùng một Pod sẽ cùng chia sẻ network allocation này bao gồm IP và Port binding. Port container có thể giao tiếp với nhau localhost. Khi expose các container ra ngoài thì sẽ sử dụng chung một network reosurce.
  - Storage: có thể chỉ định nhiều share volume cho 1 Pod. Tất cả container trong Pod có thể truy cập vào shared volume này. Volume có thể sử dụng volume dài hạn ( không đi kèm với vòng đời của container) để tránh mất dữ liệu khi container restart

## Phân tích Pod

- Pod giống như một thùng chứa, bên trong chứa một hoặc nhiều container, chúng cùng được chia sẻ tài nguyên lưu trữ, mạng. Pod container luôn được scheduler tạo một thời điểm và đặt chung trên 1 node. Hiểu đơn giản Pod như một máy chủ vật lý, các container ở trong là các process hay ứng dụng, liên hệ với nhau qua localhost và sử dụng chung fileystem cũng như network resource.
- Mặc dù k8s hỗ trợ môi trường multiple container runtime. Docker luôn đứng top trong các runtime env.
- Các tài nguyên mà các Pod sẽ cùng phải chia sẻ với nhau là Linux namespace, cgroup và các công nghệ khác để isolate. Trong môi trường của Pod, sẽ có các sub-insolated để chia sẻ tài nguyên cho các container
- Các Container trong Pod sẽ share với nhau IP address và port, chúng sẽ nói chuyện với nhau qua localhost tcp hoặc unix socket, giống như process bình thường chúng cũng có thể link với nhauq au SystemV hoặc POSIX. Các container giữa các Pod chỉ có thể link với nhau qua IP mà không thể link qua IPC
- Container trong Pod cũng có thể truy cập đồng thời filesystem thông qua shared filesytem.
